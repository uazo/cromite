From: uazo <uazo@users.noreply.github.com>
Date: Mon, 26 Feb 2024 16:35:16 +0000
Subject: Disable Compose feature

License: GPL-2.0-or-later - https://spdx.org/licenses/GPL-2.0-or-later.html
---
 chrome/browser/ui/webui/settings/settings_ui.cc     | 6 ++++--
 components/compose/core/browser/compose_features.cc | 2 ++
 components/compose/features.gni                     | 2 +-
 3 files changed, 7 insertions(+), 3 deletions(-)

diff --git a/chrome/browser/ui/webui/settings/settings_ui.cc b/chrome/browser/ui/webui/settings/settings_ui.cc
--- a/chrome/browser/ui/webui/settings/settings_ui.cc
+++ b/chrome/browser/ui/webui/settings/settings_ui.cc
@@ -21,7 +21,9 @@
 #include "chrome/browser/browser_features.h"
 #include "chrome/browser/browser_process.h"
 #include "chrome/browser/commerce/shopping_service_factory.h"
-#include "chrome/browser/compose/compose_enabling.h"
+// #if BUILDFLAG(ENABLE_COMPOSE)
+// #include "chrome/browser/compose/compose_enabling.h"
+// #endif
 #include "chrome/browser/history_embeddings/history_embeddings_utils.h"
 #include "chrome/browser/optimization_guide/optimization_guide_keyed_service.h"
 #include "chrome/browser/optimization_guide/optimization_guide_keyed_service_factory.h"
@@ -358,7 +360,7 @@ SettingsUI::SettingsUI(content::WebUI* web_ui)
       base::FeatureList::IsEnabled(permissions::features::kKeyboardLockPrompt));
 
 #if BUILDFLAG(ENABLE_COMPOSE)
-  const bool compose_enabled = ComposeEnabling::IsEnabledForProfile(profile);
+  const bool compose_enabled = false;
   const bool compose_visible = ComposeEnabling::IsSettingVisible(profile);
 #else
   const bool compose_enabled = false;
diff --git a/components/compose/core/browser/compose_features.cc b/components/compose/core/browser/compose_features.cc
--- a/components/compose/core/browser/compose_features.cc
+++ b/components/compose/core/browser/compose_features.cc
@@ -73,4 +73,6 @@ BASE_FEATURE(kComposeAllowOnDeviceExecution, base::FEATURE_DISABLED_BY_DEFAULT);
 
 BASE_FEATURE(kComposeUpfrontInputModes, base::FEATURE_ENABLED_BY_DEFAULT);
 
+SET_CROMITE_FEATURE_DISABLED(kEnableCompose);
+SET_CROMITE_FEATURE_DISABLED(kComposeEligible);
 }  // namespace compose::features
diff --git a/components/compose/features.gni b/components/compose/features.gni
--- a/components/compose/features.gni
+++ b/components/compose/features.gni
@@ -4,5 +4,5 @@
 
 declare_args() {
   # Whether Compose is enabled in the build.
-  enable_compose = is_mac || is_win || is_linux || is_chromeos
+  enable_compose = false
 }
--
