From: uazo <uazo@users.noreply.github.com>
Date: Sat, 24 Jan 2026 16:30:35 +0000
Subject: Temp Backport Fix CtrlW to close current tab

---
 .../org/chromium/chrome/browser/KeyboardShortcuts.java    | 8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)

diff --git a/chrome/android/java/src/org/chromium/chrome/browser/KeyboardShortcuts.java b/chrome/android/java/src/org/chromium/chrome/browser/KeyboardShortcuts.java
--- a/chrome/android/java/src/org/chromium/chrome/browser/KeyboardShortcuts.java
+++ b/chrome/android/java/src/org/chromium/chrome/browser/KeyboardShortcuts.java
@@ -1095,12 +1095,18 @@ public class KeyboardShortcuts {
                         if (!currentTabModel.isTabMultiSelected(tab.getId())) continue;
                         selectedTabs.add(tab);
                     }
+                    // backport 7435408: Fix Ctrl+W to close current tab when tab highlighting is disabled
+                    // https://chromium-review.googlesource.com/c/chromium/src/+/7435408
+                    List<Tab> tabsToClose =
+                            selectedTabs.isEmpty()
+                                    ? List.of(TabModelUtils.getCurrentTab(currentTabModel))
+                                    : selectedTabs;
                     Tab tab = TabModelUtils.getCurrentTab(currentTabModel);
                     if (tab != null) {
                         currentTabModel
                                 .getTabRemover()
                                 .closeTabs(
-                                        TabClosureParams.closeTabs(selectedTabs)
+                                        TabClosureParams.closeTabs(tabsToClose)
                                                 .allowUndo(false)
                                                 .tabClosingSource(
                                                         TabClosingSource.KEYBOARD_SHORTCUT)
--
