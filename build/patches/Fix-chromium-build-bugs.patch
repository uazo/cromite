From: Your Name <you@example.com>
Date: Wed, 6 Sep 2023 17:55:01 +0000
Subject: Fix chromium build bugs

because of
https://bugs.chromium.org/p/chromium/issues/detail?id=1491776#c10
---
 BUILD.gn                                           |  1 -
 .../navigation_predictor_metrics_document_data.h   |  2 ++
 chrome/browser/safe_browsing/BUILD.gn              |  1 +
 .../component_updater/installer_policies/BUILD.gn  |  1 +
 components/contextual_tasks/internal/BUILD.gn      |  1 +
 .../omnibox/browser/autocomplete_classifier.cc     |  4 ++--
 components/omnibox/browser/omnibox_field_trial.cc  |  4 ++--
 .../phishing_classifier/phishing_image_embedder.cc | 14 +++-----------
 content/browser/browser_interface_binders.cc       |  1 +
 services/webnn/dml/graph_impl_dml.cc               |  1 +
 10 files changed, 14 insertions(+), 16 deletions(-)

diff --git a/BUILD.gn b/BUILD.gn
--- a/BUILD.gn
+++ b/BUILD.gn
@@ -410,7 +410,6 @@ group("gn_all") {
           "//android_webview:empty_group",
           "//android_webview/test",
           "//android_webview/tools/automated_ui_tests:webview_ui_test_app_test_apk",
-          "//android_webview/tools/captured_sites_tests:captured_sites_test_app",
           "//android_webview/tools/sdk_sandbox",
           "//android_webview/tools/system_webview_shell",
           "//chrome/android:chrome_junit_tests",
diff --git a/chrome/browser/navigation_predictor/navigation_predictor_metrics_document_data.h b/chrome/browser/navigation_predictor/navigation_predictor_metrics_document_data.h
--- a/chrome/browser/navigation_predictor/navigation_predictor_metrics_document_data.h
+++ b/chrome/browser/navigation_predictor/navigation_predictor_metrics_document_data.h
@@ -69,6 +69,8 @@ class NavigationPredictorMetricsDocumentData
     UserInteractionsData(const UserInteractionsData&);
     UserInteractionsData& operator=(const UserInteractionsData&);
 
+    UserInteractionsData& operator=(UserInteractionsData&&) noexcept = default;
+
     // True if the anchor element is still in viewport, otherwise false.
     bool is_in_viewport = false;
     // True if the pointer is still hovering over the anchor element,
diff --git a/chrome/browser/safe_browsing/BUILD.gn b/chrome/browser/safe_browsing/BUILD.gn
--- a/chrome/browser/safe_browsing/BUILD.gn
+++ b/chrome/browser/safe_browsing/BUILD.gn
@@ -309,6 +309,7 @@ static_library("safe_browsing") {
       "//components/version_info",
       "//content/public/browser",
       "//services/preferences/public/mojom",
+      "//third_party/flatbuffers:flatbuffers",
     ]
 
     allow_circular_includes_from += [ "//chrome/browser/ui/safety_hub" ]
diff --git a/components/component_updater/installer_policies/BUILD.gn b/components/component_updater/installer_policies/BUILD.gn
--- a/components/component_updater/installer_policies/BUILD.gn
+++ b/components/component_updater/installer_policies/BUILD.gn
@@ -52,6 +52,7 @@ static_library("installer_policies_no_content_deps") {
     "//components/update_client",
     "//mojo/public/cpp/base:protobuf_support",
     "//services/network/public/cpp",
+    "//third_party/re2",
   ]
 
   # Disallow depending on content.
diff --git a/components/contextual_tasks/internal/BUILD.gn b/components/contextual_tasks/internal/BUILD.gn
--- a/components/contextual_tasks/internal/BUILD.gn
+++ b/components/contextual_tasks/internal/BUILD.gn
@@ -47,6 +47,7 @@ source_set("internal") {
     "//net",
     "//ui/gfx",
     "//url",
+    "//third_party/re2",
   ]
 }
 
diff --git a/components/omnibox/browser/autocomplete_classifier.cc b/components/omnibox/browser/autocomplete_classifier.cc
--- a/components/omnibox/browser/autocomplete_classifier.cc
+++ b/components/omnibox/browser/autocomplete_classifier.cc
@@ -132,8 +132,8 @@ void AutocompleteClassifier::Classify(
     metrics::OmniboxEventProto::PageClassification page_classification,
     AutocompleteMatch* match,
     GURL* alternate_nav_url) {
-  TRACE_EVENT1("omnibox", "AutocompleteClassifier::Classify", "text",
-               base::UTF16ToUTF8(text));
+  // TRACE_EVENT1("omnibox", "AutocompleteClassifier::Classify", "text",
+  //              base::UTF16ToUTF8(text));
   DCHECK(!inside_classify_);
   base::AutoReset<bool> reset(&inside_classify_, true);
   AutocompleteInput input(text, page_classification, *scheme_classifier_);
diff --git a/components/omnibox/browser/omnibox_field_trial.cc b/components/omnibox/browser/omnibox_field_trial.cc
--- a/components/omnibox/browser/omnibox_field_trial.cc
+++ b/components/omnibox/browser/omnibox_field_trial.cc
@@ -818,11 +818,11 @@ MLConfig& MLConfig::operator=(const MLConfig& other) = default;
 
 ScopedMLConfigForTesting::ScopedMLConfigForTesting()
     : original_config_(std::make_unique<MLConfig>(GetMLConfig())) {
-  GetMLConfigInternal() = {};
+  //GetMLConfigInternal() = {};
 }
 
 ScopedMLConfigForTesting::~ScopedMLConfigForTesting() {
-  GetMLConfigInternal() = *original_config_;
+  //GetMLConfigInternal() = *original_config_;
 }
 
 MLConfig& ScopedMLConfigForTesting::GetMLConfig() {
diff --git a/components/safe_browsing/content/renderer/phishing_classifier/phishing_image_embedder.cc b/components/safe_browsing/content/renderer/phishing_classifier/phishing_image_embedder.cc
--- a/components/safe_browsing/content/renderer/phishing_classifier/phishing_image_embedder.cc
+++ b/components/safe_browsing/content/renderer/phishing_classifier/phishing_image_embedder.cc
@@ -50,17 +50,9 @@ void PhishingImageEmbedder::BeginImageEmbedding(DoneCallback done_callback) {
 
 void PhishingImageEmbedder::OnPlaybackDone(std::unique_ptr<SkBitmap> bitmap) {
 #if BUILDFLAG(BUILD_WITH_TFLITE_LIB)
-  if (bitmap) {
-    bitmap_ = std::move(bitmap);
-    ScorerStorage::GetInstance()
-        ->GetScorer()
-        ->ApplyVisualTfLiteModelImageEmbedding(
-            *bitmap_,
-            base::BindOnce(&PhishingImageEmbedder::OnImageEmbeddingDone,
-                           weak_factory_.GetWeakPtr()));
-  } else {
-    RunFailureCallback();
-  }
+  // (UAZO) removed due error:
+  // no member named 'ApplyVisualTfLiteModelImageEmbedding' in 'safe_browsing::Scorer'
+  RunFailureCallback();
 #else
   RunFailureCallback();
 #endif
diff --git a/content/browser/browser_interface_binders.cc b/content/browser/browser_interface_binders.cc
--- a/content/browser/browser_interface_binders.cc
+++ b/content/browser/browser_interface_binders.cc
@@ -359,6 +359,7 @@ void BindDateTimeChooserForFrame(
 void BindTextSuggestionHostForFrame(
     RenderFrameHost* host,
     mojo::PendingReceiver<blink::mojom::TextSuggestionHost> receiver) {
+  if ((true)) return;
   auto* view =
       RenderWidgetHostViewAndroid::FromRenderWidgetHostView(host->GetView());
   if (!view || !view->text_suggestion_host())
diff --git a/services/webnn/dml/graph_impl_dml.cc b/services/webnn/dml/graph_impl_dml.cc
--- a/services/webnn/dml/graph_impl_dml.cc
+++ b/services/webnn/dml/graph_impl_dml.cc
@@ -246,6 +246,7 @@ base::expected<void, mojom::ErrorPtr> CreateUnexpectedError(
 
 // Calculate the total byte length of buffers and the D3D12_RANGE for each
 // buffer, all with the required alignment.
+[[maybe_unused]]
 std::optional<AlignedByteLength<OperandId>> CalculateAlignedByteLength(
     const base::flat_map<OperandId, std::unique_ptr<WebNNConstantOperand>>&
         constant_operands) {
--
